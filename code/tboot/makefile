################################################################################
# [Borland/Embarcadero v5.43] Makefile for TBOOT (Tiny Bootloader)
# Copyright (c) 2022 by Tony G. Papadimitriou <tonyp@acm.org>
################################################################################

HELP:
 @echo "*********************************************************
 @echo "* Targets: ALL GB60
 @echo "*          QG8 QE8 QE32 QE128 DZ32 DZ60 FL16 SH8 AC32 AC96
 @echo "*          QE128MMU AC96MMU
 @echo "*          PDF - Produce PDF for FAQ
 @echo "*********************************************************
 @echo "* Defines: DEBUG
 @echo "*********************************************************

!ifdef DEBUG
O = $(O) -dDEBUG -dMAP
!else
O = $(O) -dPRIVATE
!endif

ASM8 = asm8.exe tboot -s+ -l+ -m+ -e+ -ls -lss -exp+ $(O) -b$@

################################################################################

all     : qg8 qe8 qe32 qe128 dz32 dz60 fl16 sh8 ac32 ac96

gb60    : tboot_gb60.s
qg8     : tboot_qg8.s
qe8     : tboot_qe8.s
qe32    : tboot_qe32.s
qe128   : tboot_qe128.s
qe128mmu: tboot_qe128mmu.s
dz32    : tboot_dz32.s
dz60    : tboot_dz60.s
fl16    : tboot_fl16.s
sh8     : tboot_sh8.s
ac32    : tboot_ac32.s
ac96    : tboot_ac96.s
ac96mmu : tboot_ac96mmu.s

################################################################################

pdf: faq.pdf
faq.pdf: faq.md
 @pandoc faq.md -t html -o $@

################################################################################

tboot_qg8.s: qg8.inc
 $(ASM8) -dQG8

################################################################################

tboot_qe8.s: qe8.inc
 $(ASM8) -dQE8

################################################################################

tboot_qe32.s: qe32.inc
 $(ASM8) -dQE32

################################################################################

tboot_ac32.s: ac32.inc
 $(ASM8) -dAC32

################################################################################

tboot_ac96.s: ac96.inc
 $(ASM8) -dAC96

################################################################################

tboot_ac96mmu.s: ac96.inc
 $(ASM8) -dAC96 -mmu

################################################################################

tboot_fl16.s: fl16.inc
 $(ASM8) -dFL16 -dDISABLE_SURE

################################################################################

tboot_qe128.s: qe128.inc
 $(ASM8) -dQE128

################################################################################

tboot_qe128mmu.s: qe128.inc
 $(ASM8) -dQE128 -mmu

################################################################################

tboot_gb60.s: gb60.inc
 $(ASM8) -dGB60

################################################################################

tboot_dz32.s: dz32.inc
 $(ASM8) -dDZ32

################################################################################

tboot_dz60.s: dz60.inc
 $(ASM8) -dDZ60

################################################################################

tboot_sh8.s: sh8.inc
 $(ASM8) -dSH8

################################################################################
